<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>„Ç§„É≥„Ç≠Âú®Â∫´</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
    }
    .header {
      position: sticky;
      top: 0;
      background: #fff;
      padding: 16px 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      z-index: 10;
    }
    h1 {
      font-size: 20px;
      font-weight: 600;
      color: #333;
      margin-bottom: 12px;
    }
    h1 span { font-size: 14px; color: #888; font-weight: 400; }
    .search {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      outline: none;
    }
    .search:focus { border-color: #2196f3; }
    
    .tabs {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }
    .tab {
      flex: 1;
      padding: 10px;
      border: none;
      background: #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }
    .tab.active {
      background: #2196f3;
      color: #fff;
    }
    
    .content { padding: 12px 16px 100px; }
    
    .category-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff;
      padding: 14px 16px;
      border-radius: 10px;
      margin-bottom: 8px;
      cursor: pointer;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      user-select: none;
    }
    .category-header:hover { background: #fafafa; }
    .category-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .category-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    }
    .category-name {
      font-size: 15px;
      font-weight: 600;
      color: #333;
    }
    .category-count {
      font-size: 13px;
      color: #888;
      background: #f0f0f0;
      padding: 2px 10px;
      border-radius: 12px;
    }
    .arrow {
      font-size: 12px;
      color: #999;
      transition: transform 0.2s;
    }
    .arrow.open { transform: rotate(90deg); }
    
    .item-list {
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      display: none;
    }
    .item-list.open { display: block; }
    
    .item {
      display: flex;
      align-items: center;
      padding: 10px 14px;
      gap: 10px;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
    }
    .item:hover { background: #f9f9f9; }
    .item:last-child { border-bottom: none; }
    .item.selected { background: #e3f2fd; }
    
    .color-dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      flex-shrink: 0;
      box-shadow: 0 1px 2px rgba(0,0,0,0.12);
    }
    .item-name {
      font-size: 14px;
      color: #333;
    }
    .shelf-tag {
      font-size: 11px;
      font-weight: 600;
      color: #fff;
      background: #666;
      padding: 2px 8px;
      border-radius: 4px;
      flex-shrink: 0;
    }
    .shelf-A { background: #e53935; }
    .shelf-B { background: #fb8c00; }
    .shelf-C { background: #43a047; }
    .shelf-D { background: #1e88e5; }
    .shelf-E { background: #8e24aa; }
    .shelf-F { background: #00897b; }
    .shelf-G { background: #d81b60; }
    
    .checkbox {
      width: 22px;
      height: 22px;
      border: 2px solid #ccc;
      border-radius: 4px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: #fff;
      background: #fff;
    }
    .item.selected .checkbox {
      background: #2196f3;
      border-color: #2196f3;
    }
    .item.selected .checkbox::after {
      content: '‚úì';
    }
    
    .empty { text-align: center; padding: 60px 20px; color: #999; }
    
    /* Â±•Ê≠¥ÁôªÈå≤„Éê„Éº */
    .register-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #fff;
      padding: 12px 16px;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      display: none;
      z-index: 20;
    }
    .register-bar.show { display: block; }
    
    .selected-count {
      font-size: 14px;
      color: #666;
      margin-bottom: 8px;
    }
    .register-form {
      display: flex;
      gap: 8px;
    }
    .register-form input {
      flex: 1;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
    }
    .register-form input:focus {
      outline: none;
      border-color: #2196f3;
    }
    .register-btn {
      padding: 12px 24px;
      background: #4caf50;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }
    .register-btn:disabled {
      background: #ccc;
    }
    
    /* Â±•Ê≠¥Ë°®Á§∫ */
    .history-item {
      background: #fff;
      padding: 12px 16px;
      border-radius: 10px;
      margin-bottom: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    }
    .history-date {
      font-size: 12px;
      color: #888;
    }
    .history-product {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin: 4px 0;
    }
    .history-inks {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .history-ink {
      font-size: 12px;
      background: #f0f0f0;
      padding: 4px 10px;
      border-radius: 12px;
    }
    
    /* Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´ */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }
    .modal-overlay.show { display: flex; }
    .modal {
      background: #fff;
      padding: 24px;
      border-radius: 16px;
      width: 90%;
      max-width: 400px;
    }
    .modal h2 {
      font-size: 18px;
      margin-bottom: 16px;
    }
    .modal label {
      display: block;
      font-size: 14px;
      color: #666;
      margin-bottom: 6px;
    }
    .modal input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      margin-bottom: 16px;
    }
    .modal-btns {
      display: flex;
      gap: 8px;
    }
    .modal-btns button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }
    .modal-btns .cancel { background: #e0e0e0; }
    .modal-btns .save { background: #2196f3; color: #fff; }
    
    .settings-btn {
      position: fixed;
      bottom: 80px;
      right: 16px;
      width: 48px;
      height: 48px;
      background: #666;
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      display: none;
      z-index: 200;
    }
    .toast.show { display: block; }
  </style>
</head>
<body>
  <div class="header">
    <h1>„Ç§„É≥„Ç≠Âú®Â∫´ <span id="count"></span></h1>
    <input type="text" class="search" id="search" placeholder="üîç Ê§úÁ¥¢... (‰æã: DIC, Ëµ§, CÊ£ö)">
    <div class="tabs">
      <button class="tab active" onclick="switchTab('list')">Âú®Â∫´‰∏ÄË¶ß</button>
      <button class="tab" onclick="switchTab('history')">‰ΩøÁî®Â±•Ê≠¥</button>
    </div>
  </div>
  
  <div class="content" id="content"></div>
  
  <div class="register-bar" id="registerBar">
    <div class="selected-count" id="selectedCount">0‰ª∂ÈÅ∏Êäû‰∏≠</div>
    <div class="register-form">
      <input type="text" id="productName" placeholder="Ë£ΩÂìÅÂêç„ÇíÂÖ•Âäõ">
      <button class="register-btn" id="registerBtn" onclick="registerHistory()">ÁôªÈå≤</button>
    </div>
  </div>
  
  <button class="settings-btn" onclick="openSettings()">‚öô</button>
  
  <div class="modal-overlay" id="settingsModal">
    <div class="modal">
      <h2>GASÈÄ£Êê∫Ë®≠ÂÆö</h2>
      <label>GAS Web„Ç¢„Éó„É™URL</label>
      <input type="text" id="gasUrl" placeholder="https://script.google.com/...">
      <div class="modal-btns">
        <button class="cancel" onclick="closeSettings()">„Ç≠„É£„É≥„Çª„É´</button>
        <button class="save" onclick="saveSettings()">‰øùÂ≠ò</button>
      </div>
    </div>
  </div>
  
  <div class="toast" id="toast"></div>

  <script>
    // ============================================
    // Ë®≠ÂÆö
    // ============================================
    let GAS_URL = localStorage.getItem('gasUrl') || '';
    
    // ============================================
    // „É≠„Éº„Ç´„É´„Éá„Éº„ÇøÔºàGASÊú™Êé•Á∂öÊôÇ„Å´‰ΩøÁî®Ôºâ
    // ============================================
    const localInkData = [
      // AÊ£ö
      {name:"FDMC A3032/DI6ÊºÜÈªí",shelf:"A"},{name:"FDMCËóç",shelf:"A"},{name:"CF0751",shelf:"A"},{name:"CF0568",shelf:"A"},{name:"„Éè„É≥„Éê„Éº„Ç∞„Ç∞„É¨„Éº",shelf:"A"},{name:"DIC302",shelf:"A"},{name:"DIC314",shelf:"A"},{name:"DIC287",shelf:"A"},{name:"F85",shelf:"A"},{name:"CF0790",shelf:"A"},{name:"DIC310",shelf:"A"},{name:"DIC91",shelf:"A"},{name:"FDMCÁ¥Ö",shelf:"A"},{name:"Áâπ„Ç™„É¨„É≥„Ç∏",shelf:"A"},{name:"DIC236",shelf:"A"},{name:"„É©„Ç∞„Ç§„ÇπËâ≤",shelf:"A"},{name:"DIC133",shelf:"A"},{name:"DIC288",shelf:"A"},{name:"DIC360",shelf:"A"},{name:"„Ç∑„É•„Ç¨„Éº„É¨„Éá„Ç£„Éî„É≥„ÇØ",shelf:"A"},{name:"DIC289",shelf:"A"},{name:"DIC1",shelf:"A"},{name:"CF6013",shelf:"A"},{name:"DIC2590",shelf:"A"},{name:"DIC938",shelf:"A"},{name:"DIC782",shelf:"A"},{name:"FD„Ç´„É´„Éà„É≥3Âè∑Áõõ",shelf:"A"},{name:"DIC2082",shelf:"A"},{name:"DIC17",shelf:"A"},{name:"FDMC„Ç∑„É•„Ç¨„ÉºÊ∑°Ëçâ",shelf:"A"},{name:"ËàûËå∏„Éî„É≥„ÇØ",shelf:"A"},{name:"CF0055",shelf:"A"},{name:"ÁâπCF0055",shelf:"A"},{name:"DIC248",shelf:"A"},{name:"DIC2201",shelf:"A"},{name:"„Ç¢„Éî„É™„Ç™CG„Éî„É≥„ÇØ",shelf:"A"},{name:"DIC32",shelf:"A"},{name:"ÊûùË±Ü",shelf:"A"},{name:"DIC P6",shelf:"A"},{name:"DIC34",shelf:"A"},{name:"CF0719",shelf:"A"},{name:"PDS ÂõΩD396Á∑ë",shelf:"A"},{name:"F28",shelf:"A"},{name:"F247",shelf:"A"},{name:"DIC243",shelf:"A"},{name:"DIC49",shelf:"A"},{name:"„Ç∞„É≠„Éº„Éê„É´„Éô„Éº„Ç∏",shelf:"A"},{name:"DIC66",shelf:"A"},{name:"DIC161",shelf:"A"},{name:"CF0600",shelf:"A"},{name:"DIC332",shelf:"A"},{name:"DIC164",shelf:"A"},{name:"DIC368",shelf:"A"},{name:"DIC90",shelf:"A"},{name:"ÁîòÂ°©„Ç∞„É¨„Éº",shelf:"A"},{name:"DIC731",shelf:"A"},
      // BÊ£ö
      {name:"ÂõΩÂÜÖ„É™„Éº„Çª„Éº„Ç∏",shelf:"B"},{name:"CR0176",shelf:"B"},{name:"DIC2186",shelf:"B"},{name:"CF0089",shelf:"B"},{name:"FDSËæõÂ°©Ëµ§",shelf:"B"},{name:"DIC26",shelf:"B"},{name:"NGP",shelf:"B"},{name:"DI6Ê∑°Ëçâ",shelf:"B"},{name:"DIC114",shelf:"B"},{name:"DIC31",shelf:"B"},{name:"DIC208",shelf:"B"},{name:"N-963",shelf:"B"},{name:"DIC223",shelf:"B"},{name:"‰ºäÂ§™Âéü",shelf:"B"},{name:"DIC443",shelf:"B"},{name:"DIC2242",shelf:"B"},{name:"DIC453",shelf:"B"},{name:"„Çπ„Éº„Éë„ÉºNGP",shelf:"B"},{name:"DIC2073",shelf:"B"},{name:"DIC234",shelf:"B"},{name:"DIC389",shelf:"B"},{name:"DIC376",shelf:"B"},{name:"DIC348",shelf:"B"},{name:"DIC25",shelf:"B"},{name:"DIC2051",shelf:"B"},{name:"„Çπ„Éº„Éë„ÉºÈäÄ",shelf:"B"},{name:"„Ç´„É´„Éà„É≥Ê∑°Ëë±",shelf:"B"},{name:"FDMC„Ç≥„Éº„É≥",shelf:"B"},
      // CÊ£ö
      {name:"„Éï„Ç∞„ÅÆ„Ç®„Çµ „Åµ„ÅêÂäõ",shelf:"C"},{name:"„Ç∑„É•„Ç¨„Éº„É¨„Éá„Ç£„ÅÆÊ¢ÖÈÖí",shelf:"C"},{name:"F218",shelf:"C"},{name:"„Ç´„Ç¥„É°„Éà„Éû„Éà„ÅÆÊ¥•ËªΩ„Åó„Åº„Çä",shelf:"C"},{name:"DIC123",shelf:"C"},{name:"CF0829",shelf:"C"},{name:"DIC649",shelf:"C"},{name:"DIC286",shelf:"C"},{name:"DIC324+„É°„Ç∏„É•„Éº„É†",shelf:"C"},{name:"DIC411",shelf:"C"},{name:"DIC124",shelf:"C"},{name:"DIC86",shelf:"C"},{name:"DIC38",shelf:"C"},{name:"DIC85",shelf:"C"},{name:"DIC2039",shelf:"C"},{name:"SMART VEGE „Éê„É´„Çµ„Éü„Ç≥ÈÖ¢",shelf:"C"},{name:"DIC200",shelf:"C"},{name:"„Éñ„Ç§„É®„É≥„ÉªXOÈÜ§‰ªïÁ´ã„Å¶Êò•Â∑ª",shelf:"C"},{name:"DIC76",shelf:"C"},{name:"DIC439",shelf:"C"},{name:"CF0225",shelf:"C"},{name:"DIC832",shelf:"C"},{name:"DIC136",shelf:"C"},{name:"DIC324",shelf:"C"},{name:"FLASH DRY UV Cure Type",shelf:"C"},{name:"„Éà„Éº„É®„Éº„É´„Éü„Éä TL „Ç™„É¨„É≥„Ç∏",shelf:"C"},{name:"„Éà„Éº„É®„Éº„É´„Éü„Éä TL „É¨„ÉÉ„Éâ",shelf:"C"},{name:"DIC‰∏çÂ§âËâ≤ No.5Ëçâ",shelf:"C"},{name:"DAI-SPARK 230Ëµ§K",shelf:"C"},{name:"„ÉÄ„Ç§„Çπ„Éë„Éº„ÇØ280 Ëµ§K",shelf:"C"},{name:"SMART VEGE Ëµ§„ÅÑ„Éà„Éû„Éà",shelf:"C"},{name:"DIC2606",shelf:"C"},{name:"SMARTVEGE F5-100 „É°„Ç∏„É•„Éº„É†60",shelf:"C"},
      // DÊ£ö
      {name:"Âà∫Ë∫´Áî®„Åº„Åü„Çì„Åà„Å≥ „ÅÑ„Å∞„Å¶„Çì",shelf:"D"},{name:"2020Âπ¥Â∫¶ SD&M „Çπ„É≠„Éº„Ç¨„É≥",shelf:"D"},{name:"DC M FG58 ÂéüËâ≤Ëóç",shelf:"D"},{name:"„ÉÅ„Éß„Ç≥„Éñ„É©„Ç¶„Éã„Éº„Ç±„Éº„Ç≠",shelf:"D"},{name:"MAR408ÈªÑ",shelf:"D"},{name:"MV„Ç∑„Éº„É´Áî® 23Ëµ§Âèà",shelf:"D"},{name:"„É®„Ç≥„Éü„Çæ„ÅÆ„Åà„Å≥„Åó„ÇÖ„ÅÜ„Åæ„ÅÑ",shelf:"D"},{name:"FD MC A28466 ÁâõËÇâÁ¥ÖXH",shelf:"D"},{name:"FD MC A28464 ËÇâ„Åò„ÇÉ„ÅåËå∂XH",shelf:"D"},{name:"DIC25",shelf:"D"},{name:"DC M 405 ÈÄèÊòéÈªÑ",shelf:"D"},{name:"FD LED ADÈªÑ R M",shelf:"D"},{name:"FD LED ADËóç R M",shelf:"D"},{name:"FD LED ADÂ¢® R M",shelf:"D"},{name:"FD LED ADÁ¥Ö R M",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ „Éá„É™Áî∑ÁàµËå∂",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ DIC-C-17 „Éî„É≥„ÇØ",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ DIC F199 „Éã„Çº„É´",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ „Éá„É™ËÇâ„Åò„ÇÉ„Åã„Ç®„É≥„Ç∏",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ DIC-205ÈªÑ",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ „Éá„É™„Åã„Åº„Å°„ÇÉÊ©ô",shelf:"D"},{name:"DIC317",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ DIC N-979Ëå∂",shelf:"D"},{name:"JC MP UVÁî® DIC305Ëå∂",shelf:"D"},{name:"DC HR 100 BHÂ¢® J",shelf:"D"},{name:"FD LPC BIOËóç M",shelf:"D"},{name:"FD MP BIOÁ¥ÖM",shelf:"D"},{name:"DC HR 400 Â¢® N",shelf:"D"},{name:"FD LPC PRÂ¢® CL",shelf:"D"},{name:"FD LPC BIOÂ¢®M",shelf:"D"},{name:"DIC435",shelf:"D"},{name:"FD A29179 Áî∑Áàµ„ÅÑ„ÇÇËå∂√óH",shelf:"D"},{name:"DIC N-778",shelf:"D"},{name:"„Åì„Å†„Çè„Çä„ÅÆÂìÅ Á≤óÊåΩÂìÅ",shelf:"D"},{name:"FD A28863 „Éá„Éü„Ç∞„É©„Çπ „Ç∞„É™„Éº„É≥XH",shelf:"D"},{name:"ÈªÑ(50)+ÈÆÆ „É°„Ç∏„É•„Éº„É†(50)",shelf:"D"},{name:"DIC346(10)+„É°„Ç∏„É•„Éº„É†(30)",shelf:"D"},{name:"UV „Éë„ÉÉ„ÇØ OP „Éã„Çπ K LED",shelf:"D"},{name:"FD A09538 „Ç´„ÉãÁéâ D-9 „ÇØ„É™„Éº„É†XH",shelf:"D"},{name:"DIC310",shelf:"D"},{name:"Áâπ UV L „Éè„É≥„Éê„Éº„Ç∞ Á∑ëN",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥„Åü„ÅÑ„ÇÅ„ÅÑ„Åë„ÇìÊøÉËå∂",shelf:"D"},{name:"DIC182",shelf:"D"},{name:"UVÁî® DIC834",shelf:"D"},{name:"„Éâ„É©„Ç§„Éï„É´„Éº„ÉÑ„Å®ÊûúÊ±Å Afternoon Tea",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥„Éá„É™Áî∑ÁàµËå∂Á∑ë",shelf:"D"},{name:"FDMC A28468 „Ç≥„Éº„É≥ËóçXH",shelf:"D"},{name:"FD LPC PR Â¢®CL",shelf:"D"},{name:"FD LPC PR Á¥Ö CL",shelf:"D"},{name:"DC HR 400 Á¥ÖN",shelf:"D"},{name:"FD LPC PRÁ¥Ö CL XH",shelf:"D"},{name:"DC HR 500 Á¥ÖN",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ PANTONE 872 „Ç¥„Éº„É´„Éâ",shelf:"D"},{name:"DIC2590",shelf:"D"},{name:"DIC453",shelf:"D"},{name:"FD O„Éã„É•„ÉºÂ¢® HF1 Âè£",shelf:"D"},{name:"JC MP CG-C-250Á∑ë",shelf:"D"},{name:"„Çπ„Éº„Éë„ÉºNGP Á¥∫ PPYG143",shelf:"D"},{name:"DIC572",shelf:"D"},{name:"DIC425",shelf:"D"},{name:"DIC235",shelf:"D"},{name:"JC MP PANTONE 356 C Á∑ë",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ DIC„Éï„É©„É≥„Çπ‰ºùÁµ±Ëâ≤ F-155 Á¥´",shelf:"D"},{name:"DIC26",shelf:"D"},{name:"UV L 12ÂìÅÁõÆ „Ç™„É¨„É≥„Ç∏N",shelf:"D"},{name:"UVÁâπÁ∑¥ DIC335 ËñÑËå∂",shelf:"D"},{name:"„Éâ„É™„É≥„ÇØ„É©„Éô„É´Áî® OP „Éã„Çπ PPSA927",shelf:"D"},{name:"DIC2081",shelf:"D"},{name:"DIC2243",shelf:"D"},{name:"„Éû„ÉÉ„Éà OP „Éã„Çπ PPYA851",shelf:"D"},{name:"UV L 12ÂìÅÁõÆÈªÑN",shelf:"D"},{name:"UV L „Åµ„Çì„Çè„ÇäÂ§© „ÇØ„É™„Éº„É† N",shelf:"D"},{name:"JC MP PANTONE 2622Ëå∂",shelf:"D"},{name:"UV L P-179C ÈáëËµ§N",shelf:"D"},{name:"JC „Ç´„É´„Éà„É≥ DIC-N-832Ëçâ",shelf:"D"},{name:"UV L „Çπ„Éû„Éº„Éà„Éô„Ç∏ „ÇØ„É™„Éº„É† N",shelf:"D"},{name:"UVÁâπÁ∑¥ DIC346 Ëå∂",shelf:"D"},{name:"UVÁâπÁ∑¥ DIC334 „Çª„Éî„Ç¢",shelf:"D"},{name:"UV L „Åï„Åè„Åï„Åè„Ç´„É¨„ÉºËµ§ N",shelf:"D"},{name:"DIC199",shelf:"D"},{name:"UVÁâπÁ∑¥ DIC273 Â∞èË±ÜËâ≤N",shelf:"D"},{name:"UVÁî® DIC161",shelf:"D"},
      // EÊ£ö
      {name:"DIC651",shelf:"E"},{name:"Ê§úÈ£ü",shelf:"E"},{name:"ÁÜüÊàê„Éè„É≥„Éê„Éº„Ç∞",shelf:"E"},{name:"„ÅÇ„Å∂„ÇäÁÑº„Åç „ÉÅ„Ç≠„É≥„Ç¨„Éº„É™„ÉÉ„ÇØÈ¢®Âë≥",shelf:"E"},{name:"Ëóç(A) „É°„Ç∏„É•„Éº„É†40 Ëóç40",shelf:"E"},{name:"Á¥Ö(A) „É°„Ç∏„É•„Éº„É†40 Á¥Ö40",shelf:"E"},{name:"F Gloss 68 Á¥´",shelf:"E"},{name:"„Ç´„É´„Éà„É≥„Åß„É´„Éï GW„Éã„Çπ",shelf:"E"},{name:"„Ç´„É´„Éà„É≥„Çª„É´„Éï OP„Éã„Çπ",shelf:"E"},{name:"A11239 TK „Ç®„Å§„Åæ„ÅÑ„ÇÇ",shelf:"E"},{name:"TK „Éè„Ç§„Ç®„Ç≥„Éº OS 10 Ëµ§M",shelf:"E"},{name:"EG Ê±üÊà∏„ÇÑÁ∑ë",shelf:"E"},{name:"FG64 Áæ§Èùí",shelf:"E"},{name:"P-Ëå∂",shelf:"E"},{name:"EG ÂõΩÊ∑±„ÉÅ„É©„Ç∑Ëµ§",shelf:"E"},{name:"„É°„Ç∏„Ç¶„É† CG„Éû„Çº„É≥„Çø",shelf:"E"},{name:"DIC34-450 ÁôΩ-75 DIC328-300",shelf:"E"},{name:"UV „Ç´„Éº„Éà„É≥ GE KÂ¢® M",shelf:"E"},{name:"F Gloss 72 Áâ°‰∏π",shelf:"E"},{name:"„Åã„Çä„Å£„Å®„Ç∏„É•„Éº„Ç∑„Éº „Éï„É©„Ç§„Éë„É≥„ÅßÁÑº„Åë ÁâπËå∂",shelf:"E"},{name:"EG „Çπ„Éº„Éë„Éº„Ç´„Éà„Ç¶Ëµ§",shelf:"E"},{name:"TKV „ÅÇ„Åä„ÅçÊúàÂ±±Á¥´ XH",shelf:"E"},{name:"PSC350 A",shelf:"E"},{name:"CF0054-15 „É°„Ç∏„Ç¶„É†„Éº45 ÁôΩ-25",shelf:"E"},{name:"FG66 Áæ§Èùí N",shelf:"E"},{name:"ÂÆ∂Â∫≠Áî®„É©„Ç∏„Ç¶„É†Ê∏©Ê≥â",shelf:"E"},{name:"UV „Ç®„Éº„Çπ Ëíº„Éì„Éº„ÉïÊøÉËå∂",shelf:"E"},{name:"F/G ÈàçËóç BX6ATC84",shelf:"E"},{name:"FG15 Á¥Ö N",shelf:"E"},{name:"EG „Éî„Éº„Çπ Á¥∫",shelf:"E"},{name:"CF6610",shelf:"E"},{name:"DIC161",shelf:"E"},{name:"DIC133",shelf:"E"},{name:"TOYO KING mark V Á¥ÖL",shelf:"E"},{name:"FG42 Ëµ§ÈªÑ",shelf:"E"},{name:"Áõ¥Â∑ª „Å°„Çä„ÇÅ„ÇìÁæΩÊ≤¢Ëèú Ëçâ",shelf:"E"},{name:"F Gloss ÊµÖËë±",shelf:"E"},{name:"FG53Ëçâ",shelf:"E"},{name:"DIC318",shelf:"E"},{name:"DIC2-186",shelf:"E"},{name:"Â§ßÈæç ËçòÊòéÁæ©Áõ£‰øÆ „Çµ„Éº„Ç∏„É£„É≥È∫∫",shelf:"E"},{name:"DIC2081",shelf:"E"},{name:"FG ËÄêÊÄßËçâ",shelf:"E"},{name:"UV L „Åï„Åè„Åï„Åè„Ç´„É¨„ÉºËµ§N",shelf:"E"},{name:"Â¢®(50)+„É°„Ç∏„É•„Éº„É†(50)",shelf:"E"},{name:"No.6 UV L„Ç´„Éº„Éà„É≥ OP„Éã„Çπ GW1",shelf:"E"},{name:"UV L 47„Çµ„Éï„Éê„Çø„ÉºËå∂N",shelf:"E"},{name:"ÁâπÁ∑¥300 51Ëçâ550 „Éõ„Çπ„Çø„Éé„Éº„É´30",shelf:"E"},{name:"„Å´„Çâ„Åæ„Çì„Åò„ÇÖ„ÅÜ",shelf:"E"},{name:"FG57 ÊµÖËë±Ëóç",shelf:"E"},{name:"FG15 Á¥Ö N",shelf:"E"},{name:"„Çπ„ÉüÁî® UV 161 JÂ¢®S",shelf:"E"},{name:"DIC2570",shelf:"E"},{name:"UVÁî® DIC782",shelf:"E"},{name:"FD„Ç´„É´„Éà„É≥ X 38Ëóç M",shelf:"E"},{name:"DIC1",shelf:"E"},{name:"DIC172-40 „É°„Ç∏„É•„Éº„É†-20 „Éõ„Çπ„Çø„Éé„Éº„É´„Éº3",shelf:"E"},{name:"TKV DIC Ê∑°Ëóç XS-N",shelf:"E"},{name:"F-Gloss 65 Áæ§Èùí",shelf:"E"},{name:"OMR114 Ê©ô",shelf:"E"},{name:"„Ç´„É©„Éº„Ç¨„Ç§„ÉâÁî® „Éî„É≥„ÇØ NO5A0460",shelf:"E"},{name:"„Éã„É•„Éº„Ç´„É≥„Éî„Ç™„É≥„Éû„ÉÉ„ÉàÂ¢®",shelf:"E"},{name:"FN-104",shelf:"E"},{name:"OMR113Ëµ§",shelf:"E"},{name:"FGloss 53Ëçâ",shelf:"E"},{name:"CF0777",shelf:"E"},{name:"FG54Ê∑°Ëë± N",shelf:"E"},{name:"D228Á≥ª No.18 ‰∏äÁ∑ë",shelf:"E"},{name:"‰∏çÂ§âËâ≤ No.8 Ëóç",shelf:"E"},{name:"FG68 Á¥´ N",shelf:"E"},{name:"UV 161 28V Á¥∫Ëóç J",shelf:"E"},{name:"POP-K „Éó„É≠„Çª„ÇπËóç",shelf:"E"},{name:"„Éë„É≥„Éà„É≥286",shelf:"E"},{name:"DIC891-60 57Ëóç-10",shelf:"E"},{name:"FG18 Ëµ§N",shelf:"E"},{name:"GP70 Á¥∫Ëóç",shelf:"E"},{name:"„Éë„É≥„Éà„É≥ 871C „Ç¥„Éº„É´„Éâ",shelf:"E"},{name:"MK66 Áæ§ÈùíN",shelf:"E"},{name:"„Åµ„Çä„Åã„Åë Á¥çË±Ü",shelf:"E"},{name:"UV L DIC26 „Éî„É≥„ÇØN",shelf:"E"},{name:"Êµ∑ÈÆÆ„Åã„ÅçÊèö„Åí",shelf:"E"},{name:"„Çπ„Éº„Éë„Éº„Ç∞„É≠„Çπ OP „Éã„Çπ K",shelf:"E"},{name:"OMR103Á¥Ö",shelf:"E"},{name:"FGloss 49 ÈùíÈªÑ",shelf:"E"},{name:"AJM „Ç∞„É™„Éº„É≥",shelf:"E"},{name:"GP70 Á¥∫ËóçËóç",shelf:"E"},{name:"MK68 Á¥´",shelf:"E"},{name:"N UQS24 Ëóç",shelf:"E"},{name:"UV„Ç®„Éº„Çπ „Çπ„Éº„Éë„ÉºÂÖ®Ëµ§",shelf:"E"},{name:"FD„Ç´„É´„Éà„É≥ X ÊµÖËë± M",shelf:"E"},{name:"FDMC A28468„Ç≥„Éº„É≥ËóçXH",shelf:"E"},{name:"UV L „Åµ„Çì„Çè„ÇäÂ§© „ÇØ„É™„Éº„É† N",shelf:"E"},{name:"JC „Ç´„É´„Éà„É≥F-155 Á¥´",shelf:"E"},{name:"CF0011 „Éò„É´„Éô„É≥ÂÖ•„Çä",shelf:"E"},{name:"„Éô„Çπ„Éà„ÉÅ„Çß„Ç¢„Éº No.3 „Ç∑„É´„Éê„Éº",shelf:"E"},{name:"DIC201",shelf:"E"},{name:"UV L „Éã„É•„ÉºÊßò „Éî„É≥„ÇØ N",shelf:"E"},{name:"„Éë„É≥„Éà„É≥294",shelf:"E"},{name:"DIC2497",shelf:"E"},{name:"UV L „Çµ„ÇØ„Çµ„ÇØ„Éê„Çø„ÉºËå∂N",shelf:"E"},{name:"UV„Ç®„Éº„Çπ „Éë„Ç¶„É™ OP „Éã„Çπ ST",shelf:"E"},{name:"JC MP PANTONE 9541Ê∑°„Ç∞„É™„Éº„É≥",shelf:"E"},{name:"JCMP UVÁî® DIC305Ëå∂",shelf:"E"},{name:"JC MP „Éî„É≥„ÇØUVÁî®",shelf:"E"},{name:"JC„Ç´„É´„Éà„É≥ DIC435 ÊøÉÁ¥∫",shelf:"E"},{name:"DIC-G37",shelf:"E"},{name:"DIC164",shelf:"E"},{name:"DIC492",shelf:"E"},{name:"„Éâ„É™„É≥„ÇØ„É©„Éô„É´Áî® OP „Éã„Çπ",shelf:"E"},{name:"JC„Ç´„É´„Éà„É≥ DIC843Ëã•Á´πËâ≤",shelf:"E"},{name:"FD LED ADÈªÑ R M",shelf:"E"},{name:"FD O„Éã„É•„ÉºËÄêÊÄßÁ¥Ö HÁ¥Ö Âè£",shelf:"E"},{name:"FD„Ç´„É´„Éà„É≥X „Ç≠„Éé„Ç≥Ëå∂XH",shelf:"E"},{name:"FDMC A09538 „Ç´„ÉãÁéâD-9 „ÇØ„É™„Éº„É†XH",shelf:"E"},{name:"FD D„Éã„É•„Éº ËÄêÊÄßÂÖ®Ëµ§ HF1 Âè£",shelf:"E"},{name:"FDMP ËÄêÊÄßÈªÑ M",shelf:"E"},{name:"UV L „Çπ„Éû„Éº„Éà„Éô„Ç∏ „ÇØ„É™„Éº„É†N",shelf:"E"},{name:"JC MP PANTONE 9360 Ê∑°Á¥´",shelf:"E"},{name:"JC MP PANTONE 9300Ê∑°„Éî„É≥„ÇØ",shelf:"E"},{name:"JC MP „Çµ„Éº„Éû„É´Áî®„Éî„É≥„ÇØ",shelf:"E"},
      // FÊ£ö
      {name:"FD LED AD ÈªÑ R M",shelf:"F"},{name:"FD MP BIO Ëóç M",shelf:"F"},{name:"GS UV L „Éè„É≥„Éê„Éº„Ç∞ „Ç∞„É¨„Éº N",shelf:"F"},{name:"JC „Ç´„É´„Éà„É≥ DIC235 ÈáëËµ§",shelf:"F"},{name:"UV D „Ç¥„Éº„É´„Éâ Ëµ§Âè£",shelf:"F"},{name:"UV D „Ç¥„Éº„É´„Éâ ÈùíÂè£",shelf:"F"},{name:"JC „Ç´„É´„Éà„É≥ DIC-205 ÈªÑ",shelf:"F"},{name:"JC „Ç´„É´„Éà„É≥ DIC-N-832 Ëçâ",shelf:"F"},{name:"DIC164",shelf:"F"},{name:"„Ç™„Éã„Ç™„É≥„Çπ„Éº„Éó",shelf:"F"},{name:"JC LED „Ç≥„Éº„Éà CG-N-725 Ëµ§",shelf:"F"},{name:"JC LED „Ç≥„Éº„Éà CG-N-890 „Éñ„É´„Éº",shelf:"F"},{name:"„Åç„Å§„Å≠„ÅÜ„Å©„Çì",shelf:"F"},{name:"FD MP ÈáëËµ§ M",shelf:"F"},{name:"JC „Ç´„É´„Éà„É≥ DIC848 Á∑ë",shelf:"F"},{name:"JC MP CG-C-267 Áæ§Èùí",shelf:"F"},{name:"JC MP CG-F-119 „Ç™„É¨„É≥„Ç∏",shelf:"F"},{name:"JC MP CG-810 ÈªÑÂúü",shelf:"F"},{name:"JC MP CG-F-111 Ëµ§",shelf:"F"},{name:"JC „Ç´„É´„Éà„É≥ DIC304 Ëå∂",shelf:"F"},{name:"UV„Ç®„Éº„Çπ BM „Ç®„ÇØ„Çª„É´ Z 961 Â¢®",shelf:"F"},{name:"NO.2 UV „Ç≥„É≥„ÉÜ„ÉÉ„ÇØ„Çπ K",shelf:"F"},{name:"UV„Ç®„Éº„Çπ BM „Ç®„ÇØ„Çª„É´ Z „Éó„É≠„Çª„Çπ Á¥Ö",shelf:"F"},{name:"UV„Ç®„Éº„Çπ BM „Ç®„ÇØ„Çª„É´ Z „Éó„É≠„Çª„Çπ ÈªÑ",shelf:"F"},{name:"UV„Ç®„Éº„Çπ BM „Ç®„ÇØ„Çª„É´ Z „Éó„É≠„Çª„Çπ Ëóç",shelf:"F"},
      // GÊ£ö
      {name:"UV„Ç®„Éº„Çπ „Ç®„ÇØ„Çª„É´ Z PANTONE P115-16C ÁâπÈùí",shelf:"G"},{name:"UV„Ç®„Éº„Çπ „Ç®„ÇØ„Çª„É´ Z PANTONE P48-16C ÁâπËµ§",shelf:"G"},{name:"JC LED Êñ∞ÂÆø„Ç´„É¨„Éº „Ç≠„Éº„Éû„Ç´„É¨„Éº ÈáëËµ§",shelf:"G"},{name:"JC LED Êñ∞ÂÆø„Ç´„É¨„Éº „Éù„Éº„ÇØËæõÂè£ „Éî„É≥„ÇØ",shelf:"G"},{name:"JC LED Êñ∞ÂÆø„Ç´„É¨„Éº „Éì„Éº„Éï Ëå∂",shelf:"G"},{name:"JC LED Êñ∞ÂÆø„Ç´„É¨„Éº „Éù„Éº„ÇØÈáéËèú „Ç∞„É™„Éº„É≥",shelf:"G"},{name:"JC LED Êñ∞ÂÆø„Ç´„É¨„Éº ÈªÑ",shelf:"G"},{name:"JC LED Êñ∞ÂÆø„Ç´„É¨„Éº „Éù„Éº„ÇØ‰∏≠Ëæõ „Éñ„É´„Éº",shelf:"G"},{name:"A09538 „Ç´„ÉãÁéâD-9 „ÇØ„É™„Éº„É†XH",shelf:"G"},{name:"FD MC CF „Éû„Çº„É≥„Çø XH",shelf:"G"},{name:"UVÁâπÁ∑¥ DIC12 Ê∑°Ëçâ",shelf:"G"},{name:"JC MP „Åï„Å§„Åæ„ÅÑ„ÇÇ Ëµ§Ëå∂",shelf:"G"},{name:"JC MP „Åï„Å§„Åæ„ÅÑ„ÇÇ „Ç™„É¨„É≥„Ç∏",shelf:"G"},{name:"JC MP „Åï„Å§„Åæ„ÅÑ„ÇÇ ÈªÑÂúü",shelf:"G"},{name:"DIC330",shelf:"G"},{name:"JC MP CG-206 „Ç™„É¨„É≥„Ç∏",shelf:"G"},{name:"JC LED „Éã„ÉÅ„É¨„Ç§„ÅÆËµ§",shelf:"G"},{name:"GS UV L DIC156 ÈáëËµ§ N",shelf:"G"},{name:"JC „Ç´„É´„Éà„É≥ „Åü„ÅÑ„ÇÅ„ÅÑ„Åë„Çì 2024 Ëå∂",shelf:"G"},{name:"JC „Ç´„É´„Éà„É≥ Êò•Â∑ª „Ç®„É≥„Ç∏",shelf:"G"},{name:"JC „Ç´„É´„Éà„É≥ DIC232 „Ç®„É≥„Ç∏",shelf:"G"},{name:"FD MP ÁôΩ M",shelf:"G"},{name:"JC LED „Ç≥„Éº„Éà CG-564 Ëµ§",shelf:"G"},{name:"JC LED „Ç≥„Éº„Éà CG-61 „Ç∞„É™„Éº„É≥",shelf:"G"},{name:"JC LED „Ç≥„Éº„Éà CG-71 Ê∑°Á¥´",shelf:"G"},{name:"JC LED „Ç≥„Éº„Éà CG-124 „Ç™„É¨„É≥„Ç∏",shelf:"G"},{name:"NO.5 UV L„Ç´„Éº„Éà„É≥ J „É°„Ç∏„Ç¶„É† GW",shelf:"G"},{name:"DC F„Ç∞„É≠„Çπ HR „Ç´„É©„Éº„Ç¨„Ç§„ÉâÁî® „Ç∞„É™„Éº„É≥ J N",shelf:"G"},{name:"DC M 405 ÈÄèÊòéÈªÑ",shelf:"G"},{name:"DC MAS Á¥Ö N",shelf:"G"},{name:"DC MAS ÈáëËµ§ N",shelf:"G"},{name:"MAR „Ç∞„É™„Éº„É≥",shelf:"G"},{name:"MAR FG58 ÂéüËâ≤Ëóç",shelf:"G"},{name:"UV MP 301 Ê©ô N",shelf:"G"},{name:"UVÁâπÁ∑¥ FG51 Ëçâ N",shelf:"G"},{name:"FD MC A28464 ËÇâ„Åò„ÇÉ„Åå Êú± XH",shelf:"G"},{name:"FD MP Á¥Ö M",shelf:"G"},{name:"MAR 203 Ëµ§",shelf:"G"},{name:"DC M 301 Ê©ô",shelf:"G"},{name:"FD MC A28466 ÁâõËÇâ Á¥Ö XH",shelf:"G"}
    ];

    // ============================================
    // Áä∂ÊÖãÁÆ°ÁêÜ
    // ============================================
    let inkData = localInkData;
    let processedData = [];
    let selectedInks = new Set();
    let currentTab = 'list';
    let openCategories = {};
    let historyData = JSON.parse(localStorage.getItem('inkHistory') || '[]');

    // ============================================
    // Ëâ≤Âà§ÂÆö
    // ============================================
    function detectColor(name) {
      if (/Ëµ§|„É¨„ÉÉ„Éâ|red|Á¥Ö|„Åà„Çì„Åò|„Ç®„É≥„Ç∏|Êú±|„Éû„Çº„É≥„Çø|magenta|Áâ°‰∏π/i.test(name)) return { color: '#e53935', category: 'üî¥ Ëµ§Á≥ª', order: 1 };
      if (/„Éî„É≥„ÇØ|pink|Ê°É|„Åï„Åè„Çâ/i.test(name)) return { color: '#ec407a', category: 'ü©∑ „Éî„É≥„ÇØÁ≥ª', order: 2 };
      if (/„Ç™„É¨„É≥„Ç∏|Ê©ô|„Å†„ÅÑ„Å†„ÅÑ|orange/i.test(name)) return { color: '#ff9800', category: 'üü† „Ç™„É¨„É≥„Ç∏Á≥ª', order: 3 };
      if (/ÈªÑ|„Ç§„Ç®„É≠„Éº|yellow|Èáë|„Ç¥„Éº„É´„Éâ|gold/i.test(name)) return { color: '#fdd835', category: 'üü° ÈªÑÁ≥ª', order: 4 };
      if (/Á∑ë|„Ç∞„É™„Éº„É≥|green|Ëçâ|Ëã•Á´π/i.test(name)) return { color: '#43a047', category: 'üü¢ Á∑ëÁ≥ª', order: 5 };
      if (/Èùí|„Éñ„É´„Éº|blue|Ëóç|Á¥∫|Áæ§Èùí|Ëíº|„Ç≥„Éê„É´„Éà/i.test(name)) return { color: '#1e88e5', category: 'üîµ ÈùíÁ≥ª', order: 6 };
      if (/Á¥´|„Éë„Éº„Éó„É´|purple|„Éê„Ç§„Ç™„É¨„ÉÉ„Éà|violet|„ÇÄ„Çâ„Åï„Åç|„É†„É©„Çµ„Ç≠/i.test(name)) return { color: '#8e24aa', category: 'üü£ Á¥´Á≥ª', order: 7 };
      if (/Ëå∂|„Éñ„É©„Ç¶„É≥|brown|„Çª„Éî„Ç¢|Â∞èË±Ü|„ÉÅ„Éß„Ç≥|„Éá„Éü„Ç∞„É©„Çπ/i.test(name)) return { color: '#6d4c41', category: 'üü§ Ëå∂Á≥ª', order: 8 };
      if (/Èªí|Â¢®|„Éñ„É©„ÉÉ„ÇØ|black|ÊºÜÈªí/i.test(name)) return { color: '#212121', category: '‚ö´ ÈªíÁ≥ª', order: 9 };
      if (/ÁôΩ|„Éõ„ÉØ„Ç§„Éà|white/i.test(name)) return { color: '#e0e0e0', category: '‚ö™ ÁôΩÁ≥ª', order: 10 };
      if (/„Ç∞„É¨„Éº|ÁÅ∞|„Ç∞„É¨„Ç§|gray|grey|„Ç∑„É´„Éê„Éº|silver|ÈäÄ/i.test(name)) return { color: '#9e9e9e', category: 'ü©∂ „Ç∞„É¨„ÉºÁ≥ª', order: 11 };
      if (/„ÇØ„É™„Éº„É†|„Éô„Éº„Ç∏„É•|beige|cream|Ê∑°/i.test(name)) return { color: '#ffe0b2', category: 'üü° „Éô„Éº„Ç∏„É•Á≥ª', order: 12 };
      if (/ÊµÖËë±|„ÅÇ„Åï„Åé/i.test(name)) return { color: '#00acc1', category: 'üîµ ÈùíÁ≥ª', order: 6 };
      
      const dicMatch = name.match(/DIC\s*(\d+)/i);
      if (dicMatch) {
        const num = parseInt(dicMatch[1]);
        if (num >= 1 && num <= 100) return { color: '#e53935', category: 'üî¥ Ëµ§Á≥ª', order: 1 };
        if (num >= 101 && num <= 200) return { color: '#ff9800', category: 'üü† „Ç™„É¨„É≥„Ç∏Á≥ª', order: 3 };
        if (num >= 201 && num <= 300) return { color: '#fdd835', category: 'üü° ÈªÑÁ≥ª', order: 4 };
        if (num >= 301 && num <= 400) return { color: '#43a047', category: 'üü¢ Á∑ëÁ≥ª', order: 5 };
        if (num >= 401 && num <= 500) return { color: '#1e88e5', category: 'üîµ ÈùíÁ≥ª', order: 6 };
        if (num >= 501 && num <= 600) return { color: '#8e24aa', category: 'üü£ Á¥´Á≥ª', order: 7 };
        if (num >= 601 && num <= 700) return { color: '#6d4c41', category: 'üü§ Ëå∂Á≥ª', order: 8 };
        if (num >= 2000 && num <= 2300) return { color: '#43a047', category: 'üü¢ Á∑ëÁ≥ª', order: 5 };
        if (num >= 2400 && num <= 2700) return { color: '#1e88e5', category: 'üîµ ÈùíÁ≥ª', order: 6 };
      }
      
      return { color: '#bdbdbd', category: '‚¨ú „Åù„ÅÆ‰ªñ', order: 99 };
    }

    // ============================================
    // ÂàùÊúüÂåñ
    // ============================================
    function init() {
      processedData = inkData.map((item, idx) => ({ 
        id: idx,
        name: item.name, 
        shelf: item.shelf,
        ...detectColor(item.name) 
      })).sort((a, b) => a.order - b.order || a.name.localeCompare(b.name, 'ja'));
      
      render(processedData);
    }

    // ============================================
    // „Çø„ÉñÂàá„ÇäÊõø„Åà
    // ============================================
    function switchTab(tab) {
      currentTab = tab;
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelector(`.tab:nth-child(${tab === 'list' ? 1 : 2})`).classList.add('active');
      
      if (tab === 'list') {
        render(processedData);
      } else {
        renderHistory();
      }
    }

    // ============================================
    // ‰∏ÄË¶ß„É¨„É≥„ÉÄ„É™„É≥„Ç∞
    // ============================================
    function render(data) {
      const content = document.getElementById('content');
      document.getElementById('count').textContent = `(${data.length}‰ª∂)`;
      
      if (data.length === 0) {
        content.innerHTML = '<div class="empty">Ë©≤ÂΩì„Åô„Çã„Ç§„É≥„Ç≠„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
        return;
      }

      const groups = {};
      data.forEach(item => {
        if (!groups[item.category]) groups[item.category] = { items: [], color: item.color, order: item.order };
        groups[item.category].items.push(item);
      });

      const sortedGroups = Object.entries(groups).sort((a, b) => a[1].order - b[1].order);

      content.innerHTML = sortedGroups.map(([category, group]) => `
        <div class="category-header" onclick="toggleCategory('cat-${group.order}')">
          <div class="category-left">
            <div class="category-dot" style="background:${group.color}"></div>
            <span class="category-name">${category}</span>
          </div>
          <div style="display:flex;align-items:center;gap:8px;">
            <span class="category-count">${group.items.length}</span>
            <span class="arrow ${openCategories['cat-'+group.order] ? 'open' : ''}" id="arrow-cat-${group.order}">‚ñ∂</span>
          </div>
        </div>
        <div class="item-list ${openCategories['cat-'+group.order] ? 'open' : ''}" id="list-cat-${group.order}">
          ${group.items.map(item => `
            <div class="item ${selectedInks.has(item.id) ? 'selected' : ''}" onclick="toggleSelect(${item.id})">
              <div class="checkbox"></div>
              <div class="color-dot" style="background:${item.color};${item.color === '#e0e0e0' ? 'border:1px solid #ccc;' : ''}"></div>
              <span class="item-name">${item.name}</span>
              <span class="shelf-tag shelf-${item.shelf}">${item.shelf}Ê£ö</span>
            </div>
          `).join('')}
        </div>
      `).join('');
      
      updateRegisterBar();
    }

    // ============================================
    // Â±•Ê≠¥„É¨„É≥„ÉÄ„É™„É≥„Ç∞
    // ============================================
    function renderHistory() {
      const content = document.getElementById('content');
      document.getElementById('count').textContent = `(${historyData.length}‰ª∂)`;
      
      if (historyData.length === 0) {
        content.innerHTML = '<div class="empty">‰ΩøÁî®Â±•Ê≠¥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
        return;
      }
      
      // Êñ∞„Åó„ÅÑÈ†Ü„Å´Ë°®Á§∫
      const sorted = [...historyData].reverse();
      
      content.innerHTML = sorted.map(h => `
        <div class="history-item">
          <div class="history-date">${h.date}</div>
          <div class="history-product">${h.product}</div>
          <div class="history-inks">
            ${h.inks.map(ink => `<span class="history-ink">${ink.name} (${ink.shelf}Ê£ö)</span>`).join('')}
          </div>
        </div>
      `).join('');
      
      document.getElementById('registerBar').classList.remove('show');
    }

    // ============================================
    // „Ç´„ÉÜ„Ç¥„É™ÈñãÈñâ
    // ============================================
    function toggleCategory(catId) {
      const list = document.getElementById('list-' + catId);
      const arrow = document.getElementById('arrow-' + catId);
      
      if (list.classList.contains('open')) {
        list.classList.remove('open');
        arrow.classList.remove('open');
        openCategories[catId] = false;
      } else {
        list.classList.add('open');
        arrow.classList.add('open');
        openCategories[catId] = true;
      }
    }

    // ============================================
    // ÈÅ∏Êäû„Éà„Ç∞„É´
    // ============================================
    function toggleSelect(id) {
      if (selectedInks.has(id)) {
        selectedInks.delete(id);
      } else {
        selectedInks.add(id);
      }
      
      // ÂÜçÊèèÁîª
      const item = document.querySelector(`.item[onclick="toggleSelect(${id})"]`);
      if (item) {
        item.classList.toggle('selected');
      }
      
      updateRegisterBar();
    }

    // ============================================
    // ÁôªÈå≤„Éê„ÉºÊõ¥Êñ∞
    // ============================================
    function updateRegisterBar() {
      const bar = document.getElementById('registerBar');
      const count = document.getElementById('selectedCount');
      
      if (selectedInks.size > 0 && currentTab === 'list') {
        bar.classList.add('show');
        count.textContent = `${selectedInks.size}‰ª∂ÈÅ∏Êäû‰∏≠`;
      } else {
        bar.classList.remove('show');
      }
    }

    // ============================================
    // Â±•Ê≠¥ÁôªÈå≤
    // ============================================
    async function registerHistory() {
      const productName = document.getElementById('productName').value.trim();
      if (!productName) {
        showToast('Ë£ΩÂìÅÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
        return;
      }
      
      const inks = Array.from(selectedInks).map(id => {
        const ink = processedData.find(i => i.id === id);
        return { name: ink.name, shelf: ink.shelf };
      });
      
      const now = new Date();
      const dateStr = now.toLocaleString('ja-JP');
      
      const record = {
        date: dateStr,
        product: productName,
        inks: inks
      };
      
      // „É≠„Éº„Ç´„É´„Å´‰øùÂ≠ò
      historyData.push(record);
      localStorage.setItem('inkHistory', JSON.stringify(historyData));
      
      // GASÈÄ£Êê∫
      if (GAS_URL) {
        try {
          await fetch(GAS_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              action: 'addHistory',
              product: productName,
              inks: inks
            })
          });
        } catch (e) {
          console.log('GASÈÄÅ‰ø°„Ç®„É©„Éº:', e);
        }
      }
      
      // „É™„Çª„ÉÉ„Éà
      selectedInks.clear();
      document.getElementById('productName').value = '';
      render(processedData);
      
      showToast(`${inks.length}‰ª∂„ÅÆ‰ΩøÁî®Â±•Ê≠¥„ÇíÁôªÈå≤„Åó„Åæ„Åó„Åü`);
    }

    // ============================================
    // Ê§úÁ¥¢
    // ============================================
    document.getElementById('search').addEventListener('input', function(e) {
      if (currentTab !== 'list') return;
      
      const q = e.target.value.toLowerCase();
      if (!q.trim()) {
        render(processedData);
      } else {
        const filtered = processedData.filter(item => 
          item.name.toLowerCase().includes(q) || 
          item.category.includes(e.target.value) ||
          item.shelf.toLowerCase().includes(q) ||
          (item.shelf + 'Ê£ö').includes(e.target.value)
        );
        filtered.forEach(item => openCategories['cat-' + item.order] = true);
        render(filtered);
      }
    });

    // ============================================
    // Ë®≠ÂÆö„É¢„Éº„ÉÄ„É´
    // ============================================
    function openSettings() {
      document.getElementById('gasUrl').value = GAS_URL;
      document.getElementById('settingsModal').classList.add('show');
    }
    
    function closeSettings() {
      document.getElementById('settingsModal').classList.remove('show');
    }
    
    function saveSettings() {
      GAS_URL = document.getElementById('gasUrl').value.trim();
      localStorage.setItem('gasUrl', GAS_URL);
      closeSettings();
      showToast('Ë®≠ÂÆö„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü');
    }

    // ============================================
    // „Éà„Éº„Çπ„Éà
    // ============================================
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }

    // ============================================
    // Ëµ∑Âãï
    // ============================================
    init();
  </script>
</body>
</html>
